<template>
  <h2> Inventario </h2>

  <form submit.delegate="search()">
    <b>Buscar</b>
    <div class="mb-3 search">
      <div>
        <label>NÃºmero de Parte</label>
        <input type="text" class="form-control" value.bind="query.idParte">
      </div>
      <div>
        <label>Tipo</label>
        <select value.bind="query.Tipo" class="form-control">
          <option selected value=${undefined}>Seleccionar</option>
          <option repeat.for="type of types" value=${type}>${capitalize(type)}</option>
        </select>
      </div>
      <div>
        <label>Familia</label>
        <select value.bind="query.Familia" class="form-control">
          <option selected value=${undefined}>Seleccionar</option>
          <option repeat.for="family of families" value=${family}>${capitalize(family)}</option>
        </select>
      </div>
      <div>
        <label class="transparent">.</label>
        <button class="btn btn-primary" type="submit">Buscar</button>
      </div>
    </div>
  </form>

  <form submit.delegate="sort()">
    <b>Ordenar</b>
    <div class="mb-3 search">
      <div>
        <label>Disponible</label>
        <select value.bind="sorts.Disponible" class="form-control">
          <option value="" selected>Seleccionar</option>
          <option value="descending">Descendente</option>
          <option value="ascending">Ascendente</option>
        </select>
      </div>
      <button class="btn btn-primary" type="submit">Ordenar</button>
    </div>
  </form>
  <h2> Resultados </h2>
  <!-- TODO: tabla -->
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col"># Parte</th>
        <th scope="col">Tipo</th>
        <th scope="col">Familia</th>
        <th scope="col">Nombre</th>
        <th scope="col">Minimo</th>
        <th scope="col">Maximo</th>
        <th scope="col">Prestado</th>
        <th scope="col">Disponible</th>
      </tr>
    </thead>
    <tbody>
      <tr repeat.for="record of items">
        <td><a route-href="route: partInfo; params.bind :{partNo:record.hash}">${record.idParte}</a></td>
        <td>${record.Tipo}</td>
        <td>${record.Familia}</td>
        <td>${record.Descripcion}</td>
        <td>${record.Minimo}</td>
        <td>${record.Maximo}</td>
        <td>${amount(record.Prestados)}</td>
        <td>${amount(record.Disponible)}</td>
      </tr>
    </tbody>
  </table>
</template>
